import{r as a,j as e,a5 as T,a7 as G,y as F}from"./index-CZT2epyM.js";import{L as $}from"./loader-circle-CKdTiCls.js";import{C}from"./circle-alert-D6zUXIf7.js";import{M as H,i as K,u as W,P as X,a as B,b as Q,L as V,m as k}from"./proxy-CZU_7pNe.js";import{S as L,P as Y}from"./shield-DciU-OHW.js";import{U}from"./user-B8A5Gq2j.js";import{M as z,P as A}from"./phone-CJZglF7X.js";import{X as _}from"./x-BmxU91Q_.js";import{C as J}from"./circle-check-B9RZKwzX.js";import"./createLucideIcon-8m28Lugg.js";function I(t,o){if(typeof t=="function")return t(o);t!=null&&(t.current=o)}function Z(...t){return o=>{let r=!1;const c=t.map(h=>{const s=I(h,o);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let h=0;h<c.length;h++){const s=c[h];typeof s=="function"?s():I(t[h],null)}}}}function ee(...t){return a.useCallback(Z(...t),t)}class te extends a.Component{getSnapshotBeforeUpdate(o){const r=this.props.childRef.current;if(r&&o.isPresent&&!this.props.isPresent){const c=r.offsetParent,h=K(c)&&c.offsetWidth||0,s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft,s.right=h-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function se({children:t,isPresent:o,anchorX:r,root:c}){const h=a.useId(),s=a.useRef(null),y=a.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=a.useContext(H),n=ee(s,t?.ref);return a.useInsertionEffect(()=>{const{width:d,height:m,top:x,left:f,right:g}=y.current;if(o||!s.current||!d||!m)return;const b=r==="left"?`left: ${f}`:`right: ${g}`;s.current.dataset.motionPopId=h;const i=document.createElement("style");u&&(i.nonce=u);const l=c??document.head;return l.appendChild(i),i.sheet&&i.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${m}px !important;
            ${b}px !important;
            top: ${x}px !important;
          }
        `),()=>{l.contains(i)&&l.removeChild(i)}},[o]),e.jsx(te,{isPresent:o,childRef:s,sizeRef:y,children:a.cloneElement(t,{ref:n})})}const re=({children:t,initial:o,isPresent:r,onExitComplete:c,custom:h,presenceAffectsLayout:s,mode:y,anchorX:u,root:n})=>{const d=W(ae),m=a.useId();let x=!0,f=a.useMemo(()=>(x=!1,{id:m,initial:o,isPresent:r,custom:h,onExitComplete:g=>{d.set(g,!0);for(const b of d.values())if(!b)return;c&&c()},register:g=>(d.set(g,!1),()=>d.delete(g))}),[r,d,c]);return s&&x&&(f={...f}),a.useMemo(()=>{d.forEach((g,b)=>d.set(b,!1))},[r]),a.useEffect(()=>{!r&&!d.size&&c&&c()},[r]),y==="popLayout"&&(t=e.jsx(se,{isPresent:r,anchorX:u,root:n,children:t})),e.jsx(X.Provider,{value:f,children:t})};function ae(){return new Map}const P=t=>t.key||"";function D(t){const o=[];return a.Children.forEach(t,r=>{a.isValidElement(r)&&o.push(r)}),o}const ne=({children:t,custom:o,initial:r=!0,onExitComplete:c,presenceAffectsLayout:h=!0,mode:s="sync",propagate:y=!1,anchorX:u="left",root:n})=>{const[d,m]=B(y),x=a.useMemo(()=>D(t),[t]),f=y&&!d?[]:x.map(P),g=a.useRef(!0),b=a.useRef(x),i=W(()=>new Map),[l,v]=a.useState(x),[N,M]=a.useState(x);Q(()=>{g.current=!1,b.current=x;for(let j=0;j<N.length;j++){const p=P(N[j]);f.includes(p)?i.delete(p):i.get(p)!==!0&&i.set(p,!1)}},[N,f.length,f.join("-")]);const E=[];if(x!==l){let j=[...x];for(let p=0;p<N.length;p++){const w=N[p],R=P(w);f.includes(R)||(j.splice(p,0,w),E.push(w))}return s==="wait"&&E.length&&(j=E),M(D(j)),v(x),null}const{forceRender:q}=a.useContext(V);return e.jsx(e.Fragment,{children:N.map(j=>{const p=P(j),w=y&&!d?!1:x===N||f.includes(p),R=()=>{if(i.has(p))i.set(p,!0);else return;let S=!0;i.forEach(O=>{O||(S=!1)}),S&&(q?.(),M(b.current),y&&m?.(),c&&c())};return e.jsx(re,{isPresent:w,initial:!g.current||r?void 0:!1,custom:o,presenceAffectsLayout:h,mode:s,root:n,onExitComplete:w?void 0:R,anchorX:u,children:j},p)})})},ue=()=>{const{data:t,isLoading:o,isError:r,refetch:c}=T(),[h,{isLoading:s}]=G(),[y,u]=a.useState(!1),[n,d]=a.useState({}),[m,x]=a.useState({name:"",email:"",phone:""});a.useEffect(()=>{t?.profile&&(x({name:t.profile.name||"",email:t.profile.email||"",phone:t.profile.phone||""}),d({}))},[t]);const f=l=>{const{name:v,value:N}=l.target;x({...m,[v]:N}),n[v]&&d({...n,[v]:""})},g=()=>{const l={};return m.name.trim()?m.name.trim().length<2&&(l.name="Name must be at least 2 characters"):l.name="Name is required",m.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)||(l.email="Please enter a valid email address"):l.email="Email is required",m.phone.trim()?/^[\d\s\-\+\(\)]+$/.test(m.phone)||(l.phone="Please enter a valid phone number"):l.phone="Phone number is required",d(l),Object.keys(l).length===0},b=async l=>{if(l.preventDefault(),!!g())try{await h(m).unwrap(),F.success("Profile updated successfully!"),u(!1),c()}catch(v){F.error(v?.data?.message||"Update failed. Please try again.")}};if(o)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx($,{className:"w-8 h-8 animate-spin text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading profile..."})]})});if(r)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(C,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load profile"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We couldn't retrieve your profile information. Please try again later."}),e.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors font-medium",children:"Retry"})]})});const i=t?.profile;return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account information and preferences"})]}),e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 px-8 py-12 sm:py-16",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-full bg-white p-1 shadow-lg",children:e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:i?.name||"Profile",className:"w-full h-full rounded-full object-cover"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 w-6 h-6 rounded-full border-4 border-white"})]}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white capitalize",children:i?.name||"User Name"}),e.jsx("p",{className:"text-gray-300 mt-1 text-lg",children:i?.email}),e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full border border-white/20",children:[e.jsx(L,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-white font-medium text-sm",children:"Super Administrator"})]})]}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-6 py-3 bg-white text-gray-900 rounded-lg hover:bg-gray-100 transition-colors font-semibold shadow-lg","aria-label":"Edit profile",children:[e.jsx(Y,{className:"w-4 h-4"}),"Edit Profile"]})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Profile Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your account details and contact information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[e.jsx(U,{className:"w-4 h-4"}),"Full Name"]}),e.jsx("div",{className:"text-base text-gray-900 font-medium",children:i?.name||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[e.jsx(z,{className:"w-4 h-4"}),"Email Address"]}),e.jsx("div",{className:"text-base text-gray-900 font-medium",children:i?.email||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[e.jsx(A,{className:"w-4 h-4"}),"Phone Number"]}),e.jsx("div",{className:"text-base text-gray-900 font-medium",children:i?.phone||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[e.jsx(L,{className:"w-4 h-4"}),"Account Role"]}),e.jsx("div",{className:"text-base text-gray-900 font-medium capitalize",children:i?.role||"Not provided"})]})]})]})]})]}),e.jsx(ne,{children:y&&e.jsxs(e.Fragment,{children:[e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:e.jsxs(k.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto pointer-events-auto",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Edit Profile"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Update your account information"})]}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:e.jsx(_,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"name",name:"name",type:"text",value:m.name,onChange:f,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-colors ${n.name?"border-red-300 bg-red-50":"border-gray-300 bg-white hover:border-gray-400"}`,placeholder:"Enter your full name","aria-invalid":!!n.name,"aria-describedby":n.name?"name-error":void 0})]}),n.name&&e.jsxs("p",{id:"name-error",className:"mt-2 text-sm text-red-600 flex items-center gap-1",role:"alert",children:[e.jsx(C,{className:"w-4 h-4"}),n.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(z,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",value:m.email,onChange:f,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-colors ${n.email?"border-red-300 bg-red-50":"border-gray-300 bg-white hover:border-gray-400"}`,placeholder:"Enter your email address","aria-invalid":!!n.email,"aria-describedby":n.email?"email-error":void 0})]}),n.email&&e.jsxs("p",{id:"email-error",className:"mt-2 text-sm text-red-600 flex items-center gap-1",role:"alert",children:[e.jsx(C,{className:"w-4 h-4"}),n.email]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(A,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"phone",name:"phone",type:"tel",value:m.phone,onChange:f,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-colors ${n.phone?"border-red-300 bg-red-50":"border-gray-300 bg-white hover:border-gray-400"}`,placeholder:"Enter your phone number","aria-invalid":!!n.phone,"aria-describedby":n.phone?"phone-error":void 0})]}),n.phone&&e.jsxs("p",{id:"phone-error",className:"mt-2 text-sm text-red-600 flex items-center gap-1",role:"alert",children:[e.jsx(C,{className:"w-4 h-4"}),n.phone]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-5 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 font-medium transition-colors",disabled:s,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"}),"Save Changes"]})})]})]})]})})]})})]})};export{ue as default};
