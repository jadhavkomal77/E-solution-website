import{b as y,e as N,D as w,E as P,r as c,j as e,y as p}from"./index-CLIh4Pj0.js";function C(){const{id:o}=y(),u=N(),{data:m,isLoading:f,isError:g}=w(o),[x]=P(),r=m?.product,[a,s]=c.useState({name:"",description:"",price:"",category:"",features:""}),[d,h]=c.useState(null),[i,l]=c.useState(null);if(c.useEffect(()=>{r&&(s({name:r.name,description:r.description,price:r.price,category:r.category,features:r.features?.join(",")||""}),l(r.image))},[r]),f)return e.jsx("p",{className:"text-center mt-20",children:"Loading product..."});if(g||!r)return e.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-red-600 text-lg mb-4",children:"Product not found"}),e.jsx("button",{onClick:()=>u("/adminDash/adminproducts"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg",children:"Back to Products"})]});const b=async t=>{t.preventDefault();const n=new FormData;Object.entries(a).forEach(([j,v])=>n.append(j,v)),d&&n.append("image",d);try{await x({id:o,formData:n}).unwrap(),p.success("✅ Product updated successfully"),u("/adminDash/adminproducts")}catch{p.error("❌ Update failed")}};return e.jsxs("div",{className:"p-6 max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Product"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsx("input",{value:a.name,onChange:t=>s({...a,name:t.target.value}),placeholder:"Product name",className:"w-full border p-2 rounded",required:!0}),e.jsx("textarea",{value:a.description,onChange:t=>s({...a,description:t.target.value}),placeholder:"Description",className:"w-full border p-2 rounded h-24",required:!0}),e.jsx("input",{type:"number",value:a.price,onChange:t=>s({...a,price:t.target.value}),placeholder:"Price",className:"w-full border p-2 rounded",required:!0}),e.jsx("input",{value:a.category,onChange:t=>s({...a,category:t.target.value}),placeholder:"Category",className:"w-full border p-2 rounded"}),e.jsx("input",{value:a.features,onChange:t=>s({...a,features:t.target.value}),placeholder:"Features (comma separated)",className:"w-full border p-2 rounded"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{h(t.target.files[0]),l(URL.createObjectURL(t.target.files[0]))}}),i&&e.jsx("img",{src:i,className:"h-40 object-contain border rounded"}),e.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded",children:"Update Product"})]})]})}export{C as default};
